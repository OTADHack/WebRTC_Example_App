<!doctype html>

<html>

  <head>
    <title>Testing togetherjs on your host - user1</title>
    <meta charset="utf-8" />
	<script src="http://172.22.0.16:8080/togetherjs.js"></script>
    <script src="http://ocwsc71se.optaresolutions.com:7001/api/wsc.js" type="text/javascript"></script>  
 </head>

  <body>
	<button onclick="loginToWsc();">Login to Oracle Communications WebRTC platform for TADHack 2014</button><br>
	<button onclick="TogetherJS(this); return false;">Start TogetherJS</button><br>
	
	<input type="hidden" name="formCallerName" id="formCallerName" value="">
	<input type="hidden" name="formCalleeName" id="formCalleeName" value="">

	<div id="controls"></div>
	
	<audio id="selfAudio" autoplay muted="true"></audio>
    <audio id="remoteAudio" autoplay></audio>
	
	<script type="text/javascript">	
	
	// Init caller and callee variables
    formCallerName.value = getQueryVariable("caller");
	if (formCallerName.value == "user1") {
		formCalleeName.value = "user2";
	} else {
		formCalleeName.value = "user1";		
	}
	
	// Allow the login to the Weblogic (if not you will receive a PermissionDeniedError in the local stream)
	function loginToWsc() {
		window.location.href = "http://ocwsc71se.optaresolutions.com:7001/login?wsc_app_uri=/ws/webrtc/guest&redirect_uri=" + window.location;
    }

	// Obtain parameters ("caller" and "callee")
	function getQueryVariable(variable) {
	  var query = window.location.search.substring(1);
	  var vars = query.split("&");
	  for (var i=0;i<vars.length;i++) {
		var pair = vars[i].split("=");
		if (pair[0] == variable) {
		  return pair[1];
		}
	  } 
	  alert('Query Variable ' + variable + ' not found');
	}
	</script>
	</body>

</html>